<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Industrial IoT Predictive Maintenance Dashboard</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <style>
        /* Enhanced styling */
        .form-input { background-color: white !important; }
        .sensor-card { background: white !important; }
        .chart-container { background: white !important; }
        .system-tab { transition: all 0.3s; }
        .system-tab.active { background: #3b82f6; color: white; }
        .status-indicator { width: 10px; height: 10px; border-radius: 50%; display: inline-block; }
        .status-online { background-color: #10B981; }
        .status-warning { background-color: #F59E0B; }
        .status-critical { background-color: #EF4444; }
        .status-offline { background-color: #6B7280; }
        .gauge-circle { fill: none; stroke: #e5e7eb; stroke-width: 8; }
        .gauge-progress { fill: none; stroke-width: 8; stroke-linecap: round; }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root">
        <div class="flex items-center justify-center min-h-screen">
            <div class="text-center">
                <div class="animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"></div>
                <p class="mt-4 text-gray-600">Loading Dashboard...</p>
            </div>
        </div>
    </div>

<script>
// Enhanced configuration with two systems
const CONFIG = {
    API_BASE_URL: 'https://api.example.com/',
    DASHBOARD: {
        TITLE: 'Industrial IoT Predictive Maintenance',
        SUBTITLE: 'Real-time Monitoring & Predictive Analytics',
        VERSION: '2.0',
        MAX_CHART_POINTS: 20,
        AUTO_REFRESH: true,
        REFRESH_INTERVAL: 5000
    },
    SYSTEMS: {
        BUCKET_ELEVATOR: {
            id: 1,
            name: 'Bucket Elevator',
            status: 'running',
            icon: 'â¬†ï¸',
            sensors: {
                SPEED: { name: 'Speed', unit: 'rpm', min: 105, max: 130, threshold: 125, critical_threshold: 128, color: '#3b82f6', icon: 'ðŸ“Š' },
                LOAD: { name: 'Load', unit: 'kg', min: 460, max: 560, threshold: 540, critical_threshold: 550, color: '#ef4444', icon: 'ðŸ‹ï¸' },
                TEMPERATURE: { name: 'Temperature', unit: 'Â°C', min: 35, max: 50, threshold: 45, critical_threshold: 48, color: '#f97316', icon: 'ðŸŒ¡ï¸' },
                VIBRATION: { name: 'Vibration', unit: 'm/sÂ²', min: 0.6, max: 1.3, threshold: 1.0, critical_threshold: 1.2, color: '#8b5cf6', icon: 'ðŸ“³' },
                CURRENT: { name: 'Current', unit: 'A', min: 2.8, max: 4.2, threshold: 3.8, critical_threshold: 4.0, color: '#10b981', icon: 'âš¡' }
            }
        },
        CONVEYOR_BELT: {
            id: 2,
            name: 'Conveyor Belt',
            status: 'running',
            icon: 'â†”ï¸',
            sensors: {
                SPEED: { name: 'Speed', unit: 'rpm', min: 80, max: 120, threshold: 110, critical_threshold: 115, color: '#3b82f6', icon: 'ðŸ“Š' },
                LOAD: { name: 'Load', unit: 'kg', min: 200, max: 400, threshold: 350, critical_threshold: 380, color: '#ef4444', icon: 'ðŸ‹ï¸' },
                TEMPERATURE: { name: 'Temperature', unit: 'Â°C', min: 30, max: 45, threshold: 40, critical_threshold: 42, color: '#f97316', icon: 'ðŸŒ¡ï¸' },
                VIBRATION: { name: 'Vibration', unit: 'm/sÂ²', min: 0.4, max: 1.0, threshold: 0.8, critical_threshold: 0.9, color: '#8b5cf6', icon: 'ðŸ“³' },
                CURRENT: { name: 'Current', unit: 'A', min: 1.5, max: 3.0, threshold: 2.7, critical_threshold: 2.9, color: '#10b981', icon: 'âš¡' }
            }
        }
    },
    ROLES: {
        operator: { name: 'Operator', permissions: ['view'], dashboardSections: ['dashboard', 'alarms'], color: '#3b82f6' },
        engineer: { name: 'Maintenance Engineer', permissions: ['view', 'manage'], dashboardSections: ['dashboard', 'alarms', 'reports', 'machines'], color: '#f97316' },
        admin: { name: 'System Admin', permissions: ['view', 'manage', 'configure'], dashboardSections: ['dashboard', 'alarms', 'reports', 'machines', 'settings'], color: '#8b5cf6' }
    },
    ALARMS: {
        PRIORITIES: {
            1: { name: 'Critical', color: '#EF4444', bgColor: '#FEE2E2' },
            2: { name: 'Warning', color: '#F59E0B', bgColor: '#FEF3C7' },
            3: { name: 'Info', color: '#3B82F6', bgColor: '#DBEAFE' },
            4: { name: 'Normal', color: '#10B981', bgColor: '#D1FAE5' }
        }
    },
    PERFORMANCE: {
        TARGETS: {
            mtbf: 1200,
            availability: 99.5,
            efficiency: 95
        }
    },
    UTILS: {
        calculatePercentage: (value, max) => (value / max) * 100,
        formatValue: (value, sensor) => value.toFixed(sensor.unit === 'rpm' ? 0 : 1) + sensor.unit,
        formatTimestamp: (date) => new Date(date).toLocaleTimeString(),
        getStatusColor: (value, sensor) => {
            if (value > sensor.critical_threshold) return '#EF4444';
            if (value > sensor.threshold) return '#F59E0B';
            return '#10B981';
        }
    },
    DEV: {
        MOCK_DATA: true
    }
};

// Enhanced Simple Line Chart Component
function SimpleLineChart({ data, dataKey1, dataKey2, color1, color2, height, title1, title2 }) {
    const canvasRef = React.useRef(null);
    
    React.useEffect(() => {
        if (!canvasRef.current || !data.length) return;
        
        const canvas = canvasRef.current;
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        height = canvas.height;
        
        // Clear canvas
        ctx.clearRect(0, 0, width, height);
        
        // Draw grid
        ctx.strokeStyle = '#f3f4f6';
        ctx.lineWidth = 1;
        
        // Vertical grid
        for (let i = 0; i <= 10; i++) {
            const x = (width / 10) * i;
            ctx.beginPath();
            ctx.moveTo(x, 0);
            ctx.lineTo(x, height);
            ctx.stroke();
        }
        
        // Horizontal grid
        for (let i = 0; i <= 8; i++) {
            const y = (height / 8) * i;
            ctx.beginPath();
            ctx.moveTo(0, y);
            ctx.lineTo(width, y);
            ctx.stroke();
        }
        
        if (data.length > 1) {
            const maxVal1 = Math.max(...data.map(d => d[dataKey1] || 0));
            const maxVal2 = Math.max(...data.map(d => d[dataKey2] || 0));
            const minVal1 = Math.min(...data.map(d => d[dataKey1] || 0));
            const minVal2 = Math.min(...data.map(d => d[dataKey2] || 0));
            
            // Draw first line
            ctx.strokeStyle = color1;
            ctx.lineWidth = 2.5;
            ctx.beginPath();
            
            data.forEach((point, index) => {
                const x = (width / (data.length - 1)) * index;
                const normalizedValue = (point[dataKey1] - minVal1) / (maxVal1 - minVal1) || 0;
                const y = height - (normalizedValue * height * 0.8) - height * 0.1;
                if (index === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();
            
            // Draw second line
            ctx.strokeStyle = color2;
            ctx.beginPath();
            
            data.forEach((point, index) => {
                const x = (width / (data.length - 1)) * index;
                const normalizedValue = (point[dataKey2] - minVal2) / (maxVal2 - minVal2) || 0;
                const y = height - (normalizedValue * height * 0.8) - height * 0.1;
                if (index === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();
        }
    }, [data, dataKey1, dataKey2, color1, color2]);
    
    return React.createElement('div', { className: 'relative' },
        React.createElement('canvas', {
            ref: canvasRef,
            width: 400,
            height: height || 300,
            className: 'w-full h-full'
        }),
        React.createElement('div', { className: 'absolute top-4 right-4 bg-white/90 px-3 py-1 rounded flex space-x-4' },
            React.createElement('div', { className: 'flex items-center space-x-2' },
                React.createElement('div', { className: 'w-3 h-3 rounded-full', style: { backgroundColor: color1 } }),
                React.createElement('span', { className: 'text-xs font-medium' }, title1)
            ),
            React.createElement('div', { className: 'flex items-center space-x-2' },
                React.createElement('div', { className: 'w-3 h-3 rounded-full', style: { backgroundColor: color2 } }),
                React.createElement('span', { className: 'text-xs font-medium' }, title2)
            )
        )
    );
}

// Main Dashboard App
function DashboardApp() {
    const { useState, useEffect, useRef } = React;
    
    // State
    const [user, setUser] = useState(null);
    const [currentView, setCurrentView] = useState('dashboard');
    const [activeSystem, setActiveSystem] = useState('BUCKET_ELEVATOR');
    const [sensorData, setSensorData] = useState({
        BUCKET_ELEVATOR: [],
        CONVEYOR_BELT: []
    });
    const [alarms, setAlarms] = useState([]);
    const [connectionStatus, setConnectionStatus] = useState('simulation');

    // Initialize
    useEffect(() => {
        generateDemoData();
        
        const interval = setInterval(() => {
            if (user && CONFIG.DASHBOARD.AUTO_REFRESH) {
                generateRealTimeData();
            }
        }, CONFIG.DASHBOARD.REFRESH_INTERVAL);

        return () => clearInterval(interval);
    }, [user]);

    const generateDemoData = () => {
        const demoData = { BUCKET_ELEVATOR: [], CONVEYOR_BELT: [] };
        
        for (let i = 0; i < CONFIG.DASHBOARD.MAX_CHART_POINTS; i++) {
            const time = new Date(Date.now() - (CONFIG.DASHBOARD.MAX_CHART_POINTS - i) * 60000);
            
            // Generate for Bucket Elevator
            const bucketData = { timestamp: time.toISOString() };
            Object.entries(CONFIG.SYSTEMS.BUCKET_ELEVATOR.sensors).forEach(([key, sensor]) => {
                const sensorKey = key.toLowerCase();
                const range = sensor.max - sensor.min;
                const baseValue = sensor.min + (range * 0.3) + Math.random() * (range * 0.4);
                bucketData[sensorKey] = Math.max(sensor.min, Math.min(sensor.max, baseValue));
            });
            demoData.BUCKET_ELEVATOR.push(bucketData);
            
            // Generate for Conveyor Belt
            const conveyorData = { timestamp: time.toISOString() };
            Object.entries(CONFIG.SYSTEMS.CONVEYOR_BELT.sensors).forEach(([key, sensor]) => {
                const sensorKey = key.toLowerCase();
                const range = sensor.max - sensor.min;
                const baseValue = sensor.min + (range * 0.3) + Math.random() * (range * 0.4);
                conveyorData[sensorKey] = Math.max(sensor.min, Math.min(sensor.max, baseValue));
            });
            demoData.CONVEYOR_BELT.push(conveyorData);
        }
        
        setSensorData(demoData);
    };

    const generateRealTimeData = () => {
        const now = new Date();
        
        // For Bucket Elevator
        const newBucketData = { timestamp: now.toISOString() };
        Object.entries(CONFIG.SYSTEMS.BUCKET_ELEVATOR.sensors).forEach(([key, sensor]) => {
            const sensorKey = key.toLowerCase();
            const range = sensor.max - sensor.min;
            const baseValue = sensor.min + (range * 0.3) + Math.random() * (range * 0.4);
            newBucketData[sensorKey] = Math.max(sensor.min, Math.min(sensor.max, baseValue));
        });
        
        // For Conveyor Belt
        const newConveyorData = { timestamp: now.toISOString() };
        Object.entries(CONFIG.SYSTEMS.CONVEYOR_BELT.sensors).forEach(([key, sensor]) => {
            const sensorKey = key.toLowerCase();
            const range = sensor.max - sensor.min;
            const baseValue = sensor.min + (range * 0.3) + Math.random() * (range * 0.4);
            newConveyorData[sensorKey] = Math.max(sensor.min, Math.min(sensor.max, baseValue));
        });
        
        setSensorData(prev => ({
            BUCKET_ELEVATOR: [...prev.BUCKET_ELEVATOR.slice(-CONFIG.DASHBOARD.MAX_CHART_POINTS + 1), newBucketData],
            CONVEYOR_BELT: [...prev.CONVEYOR_BELT.slice(-CONFIG.DASHBOARD.MAX_CHART_POINTS + 1), newConveyorData]
        }));
        
        checkAlarms('BUCKET_ELEVATOR', newBucketData);
        checkAlarms('CONVEYOR_BELT', newConveyorData);
    };

    const checkAlarms = (system, data) => {
        const newAlarms = [];
        const timestamp = new Date();
        const sensors = CONFIG.SYSTEMS[system].sensors;
        
        Object.entries(sensors).forEach(([key, sensor]) => {
            const sensorKey = key.toLowerCase();
            const value = data[sensorKey];
            
            if (value > sensor.critical_threshold) {
                newAlarms.push({
                    id: Date.now() + Math.random(),
                    system: system,
                    sensor: sensorKey,
                    type: 'CRITICAL',
                    message: `${CONFIG.SYSTEMS[system].name} - Critical ${sensor.name.toLowerCase()}: ${value.toFixed(1)} ${sensor.unit}`,
                    timestamp,
                    priority: 1,
                    acknowledged: false
                });
            } else if (value > sensor.threshold) {
                newAlarms.push({
                    id: Date.now() + Math.random(),
                    system: system,
                    sensor: sensorKey,
                    type: 'HIGH',
                    message: `${CONFIG.SYSTEMS[system].name} - High ${sensor.name.toLowerCase()}: ${value.toFixed(1)} ${sensor.unit}`,
                    timestamp,
                    priority: 2,
                    acknowledged: false
                });
            } else if (value < sensor.min * 0.9) {
                newAlarms.push({
                    id: Date.now() + Math.random(),
                    system: system,
                    sensor: sensorKey,
                    type: 'LOW',
                    message: `${CONFIG.SYSTEMS[system].name} - Low ${sensor.name.toLowerCase()}: ${value.toFixed(1)} ${sensor.unit}`,
                    timestamp,
                    priority: 2,
                    acknowledged: false
                });
            }
        });

        if (newAlarms.length > 0) {
            setAlarms(prev => [...newAlarms, ...prev].slice(0, 50));
        }
    };

    const acknowledgeAlarm = (alarmId) => {
        setAlarms(prev => prev.map(alarm => 
            alarm.id === alarmId ? { ...alarm, acknowledged: true } : alarm
        ));
    };

    const loginUser = (credentials) => {
        const roleConfig = CONFIG.ROLES[credentials.role] || CONFIG.ROLES.operator;
        setUser({
            name: roleConfig.name,
            role: credentials.role,
            permissions: roleConfig.permissions,
            dashboardSections: roleConfig.dashboardSections
        });
    };

    // Sensor Gauge Component
    const SensorGauge = ({ sensor, title, value, unit, max, threshold, icon, system }) => {
        const percentage = Math.min(100, (value / max) * 100);
        const isAlert = value > threshold || value < sensor.min * 0.9;
        const isCritical = value > sensor.critical_threshold || value < sensor.min * 0.8;
        const circumference = 2 * Math.PI * 45;
        const strokeDasharray = `${(percentage / 100) * circumference} ${circumference}`;
        const statusColor = CONFIG.UTILS.getStatusColor(value, sensor);
        
        return React.createElement('div', { 
            className: `sensor-card p-4 rounded-lg shadow ${isCritical ? 'border-2 border-red-500' : isAlert ? 'border-2 border-yellow-500' : 'border border-gray-200'} transition-all duration-300` 
        },
            React.createElement('div', { className: 'flex items-center justify-between mb-3' },
                React.createElement('h3', { className: 'text-sm font-semibold text-gray-700 flex items-center' },
                    React.createElement('span', { className: 'mr-2 text-lg' }, icon),
                    title
                ),
                isCritical && React.createElement('span', { className: 'text-red-500 text-xl animate-pulse' }, 'ðŸš¨'),
                isAlert && !isCritical && React.createElement('span', { className: 'text-yellow-500 text-xl' }, 'âš ï¸')
            ),
            React.createElement('div', { className: 'flex items-center space-x-4' },
                React.createElement('div', { className: 'flex-1' },
                    React.createElement('div', { className: 'text-2xl font-bold text-gray-900 mb-1' }, 
                        value.toFixed(unit === 'rpm' ? 0 : 1) + unit
                    ),
                    React.createElement('div', { className: 'text-xs text-gray-500 mb-1' }, 
                        `Range: ${sensor.min}-${sensor.max}${unit}`
                    ),
                    React.createElement('div', { className: 'text-xs text-gray-500' }, 
                        `Threshold: ${threshold}${unit}`
                    ),
                    React.createElement('div', { 
                        className: `text-xs font-medium mt-2 px-2 py-1 rounded-full inline-block ${
                            isCritical ? 'bg-red-100 text-red-700' :
                            isAlert ? 'bg-yellow-100 text-yellow-700' :
                            'bg-green-100 text-green-700'
                        }`
                    }, isCritical ? 'Critical' : isAlert ? 'Warning' : 'Normal')
                ),
                React.createElement('div', { className: 'relative w-24 h-24' },
                    React.createElement('svg', { className: 'w-full h-full', viewBox: '0 0 100 100' },
                        React.createElement('circle', {
                            cx: '50', cy: '50', r: '45',
                            className: 'gauge-circle'
                        }),
                        React.createElement('circle', {
                            cx: '50', cy: '50', r: '45',
                            className: 'gauge-progress',
                            stroke: statusColor,
                            strokeDasharray: strokeDasharray,
                            strokeDashoffset: '0'
                        })
                    ),
                    React.createElement('div', { className: 'absolute inset-0 flex items-center justify-center' },
                        React.createElement('span', { className: 'text-lg font-bold', style: { color: statusColor } }, `${Math.round(percentage)}%`)
                    )
                )
            )
        );
    };

    // System Tabs
    const SystemTabs = () => (
        React.createElement('div', { className: 'flex space-x-2 mb-6' },
            Object.entries(CONFIG.SYSTEMS).map(([key, system]) => 
                React.createElement('button', {
                    key: key,
                    onClick: () => setActiveSystem(key),
                    className: `system-tab px-4 py-2 rounded-lg font-medium ${
                        activeSystem === key ? 'active' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                    }`
                },
                    React.createElement('span', { className: 'mr-2' }, system.icon),
                    system.name
                )
            )
        )
    );

    // Dashboard View Component
    const DashboardView = () => {
        const system = CONFIG.SYSTEMS[activeSystem];
        const data = sensorData[activeSystem] || [];
        const latestData = data.length > 0 ? data[data.length - 1] : {};
        
        return React.createElement('div', { className: 'space-y-6' },
            React.createElement('div', { className: 'flex justify-between items-center' },
                React.createElement('h1', { className: 'text-2xl font-bold text-gray-900' }, 'Real-Time Monitoring'),
                React.createElement('div', { className: 'flex items-center space-x-4' },
                    React.createElement('span', { 
                        className: `inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${
                            connectionStatus === 'connected' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'
                        }`
                    },
                        React.createElement('span', { className: `status-indicator mr-2 status-${connectionStatus === 'connected' ? 'online' : 'warning'}` }),
                        connectionStatus === 'connected' ? 'System Online' : 'Demo Mode'
                    ),
                    React.createElement('span', { className: 'text-sm text-gray-600 font-medium' },
                        `Last Update: ${new Date().toLocaleTimeString()}`
                    )
                )
            ),
            
            React.createElement(SystemTabs),
            
            React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4' },
                Object.entries(system.sensors).map(([key, sensor]) => {
                    const sensorKey = key.toLowerCase();
                    const value = latestData[sensorKey] || 0;
                    
                    return React.createElement(SensorGauge, {
                        key: key,
                        sensor: sensor,
                        title: sensor.name,
                        value: value,
                        unit: sensor.unit,
                        max: sensor.max,
                        threshold: sensor.threshold,
                        icon: sensor.icon,
                        system: activeSystem
                    });
                })
            ),
            
            React.createElement('div', { className: 'grid grid-cols-1 lg:grid-cols-2 gap-6' },
                React.createElement('div', { className: 'bg-white p-4 rounded-lg shadow border border-gray-200' },
                    React.createElement('h3', { className: 'text-lg font-semibold mb-4 text-gray-800' }, 'Critical Parameters'),
                    React.createElement(SimpleLineChart, {
                        data: data,
                        dataKey1: 'temperature',
                        dataKey2: 'vibration',
                        color1: system.sensors.TEMPERATURE.color,
                        color2: system.sensors.VIBRATION.color,
                        title1: `Temperature (${system.sensors.TEMPERATURE.unit})`,
                        title2: `Vibration (${system.sensors.VIBRATION.unit})`,
                        height: 300
                    })
                ),
                React.createElement('div', { className: 'bg-white p-4 rounded-lg shadow border border-gray-200' },
                    React.createElement('h3', { className: 'text-lg font-semibold mb-4 text-gray-800' }, 'Performance Metrics'),
                    React.createElement(SimpleLineChart, {
                        data: data,
                        dataKey1: 'speed',
                        dataKey2: 'current',
                        color1: system.sensors.SPEED.color,
                        color2: system.sensors.CURRENT.color,
                        title1: `Speed (${system.sensors.SPEED.unit})`,
                        title2: `Current (${system.sensors.CURRENT.unit})`,
                        height: 300
                    })
                )
            )
        );
    };

    // Login Form Component
    const LoginForm = () => {
        const [credentials, setCredentials] = useState({ username: '', password: '', role: 'operator' });
        const [loginLoading, setLoginLoading] = useState(false);
        
        const handleLogin = async (e) => {
            e.preventDefault();
            setLoginLoading(true);
            await loginUser(credentials);
            setLoginLoading(false);
        };

        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-blue-800 flex items-center justify-center p-4' },
            React.createElement('div', { className: 'bg-white rounded-xl shadow-2xl p-8 w-full max-w-md' },
                React.createElement('div', { className: 'text-center mb-8' },
                    React.createElement('div', { className: 'mx-auto w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mb-4' },
                        React.createElement('span', { className: 'text-white text-2xl' }, 'âš¡')
                    ),
                    React.createElement('h1', { className: 'text-3xl font-bold text-gray-800 mb-2' }, CONFIG.DASHBOARD.TITLE),
                    React.createElement('p', { className: 'text-gray-600 font-medium' }, CONFIG.DASHBOARD.SUBTITLE),
                    React.createElement('p', { className: 'text-xs text-gray-500 mt-2' }, `Version ${CONFIG.DASHBOARD.VERSION}`)
                ),
                React.createElement('form', { onSubmit: handleLogin, className: 'space-y-6' },
                    React.createElement('div', null,
                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, 'Username'),
                        React.createElement('input', {
                            type: 'text',
                            className: 'w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500',
                            value: credentials.username,
                            onChange: (e) => setCredentials({...credentials, username: e.target.value}),
                            placeholder: 'Enter your username',
                            required: true
                        })
                    ),
                    React.createElement('div', null,
                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, 'Password'),
                        React.createElement('input', {
                            type: 'password',
                            className: 'w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500',
                            value: credentials.password,
                            onChange: (e) => setCredentials({...credentials, password: e.target.value}),
                            placeholder: 'Enter your password',
                            required: true
                        })
                    ),
                    React.createElement('div', null,
                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, 'Role'),
                        React.createElement('select', {
                            className: 'w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500',
                            value: credentials.role,
                            onChange: (e) => setCredentials({...credentials, role: e.target.value})
                        },
                            Object.entries(CONFIG.ROLES).map(([key, role]) => 
                                React.createElement('option', { key: key, value: key }, role.name)
                            )
                        )
                    ),
                    React.createElement('button', {
                        type: 'submit',
                        disabled: loginLoading,
                        className: 'w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 font-medium'
                    }, loginLoading ? 'Signing In...' : 'Sign In')
                ),
                React.createElement('div', { className: 'mt-6 text-center' },
                    React.createElement('div', { 
                        className: `text-xs inline-flex items-center px-3 py-2 rounded-full ${
                            connectionStatus === 'connected' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'
                        }`
                    },
                        React.createElement('span', { className: `status-indicator mr-2 status-${connectionStatus === 'connected' ? 'online' : 'warning'}` }),
                        React.createElement('span', { className: 'font-medium' },
                            connectionStatus === 'connected' ? 'ðŸŸ¢ API Connected' : 'ðŸŸ¡ Demo Mode'
                        )
                    )
                )
            )
        );
    };

    // Main App Render Logic
    if (!user) {
        return React.createElement(LoginForm);
    }

    return React.createElement('div', { className: 'flex flex-col min-h-screen bg-gray-100' },
        React.createElement('header', { className: 'bg-white shadow-sm border-b border-gray-200' },
            React.createElement('div', { className: 'flex items-center justify-between px-6 py-4' },
                React.createElement('div', { className: 'flex items-center space-x-4' },
                    React.createElement('h2', { className: 'text-xl font-bold text-gray-800' },
                        currentView === 'dashboard' ? 'Dashboard' : 'Alarms'
                    )
                ),
                React.createElement('div', { className: 'flex items-center space-x-4' },
                    React.createElement('div', { className: 'flex items-center space-x-3 bg-gray-50 rounded-lg px-4 py-2' },
                        React.createElement('div', null,
                            React.createElement('span', { className: 'text-sm font-semibold text-gray-700 block' }, user.name),
                            React.createElement('span', { 
                                className: 'text-xs px-2 py-1 rounded-full font-medium',
                                style: { 
                                    backgroundColor: CONFIG.ROLES[user.role].color + '20', 
                                    color: CONFIG.ROLES[user.role].color
                                }
                            }, user.role.toUpperCase())
                        )
                    ),
                    React.createElement('button', {
                        onClick: () => setUser(null),
                        className: 'text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100',
                        title: 'Logout'
                    }, React.createElement('span', { className: 'text-xl' }, 'ðŸšª'))
                )
            )
        ),
        React.createElement('main', { className: 'flex-1 p-6' },
            React.createElement(DashboardView)
        )
    );
}

// Initialize the app
ReactDOM.render(React.createElement(DashboardApp), document.getElementById('root'));
</script>
</body>
</html>